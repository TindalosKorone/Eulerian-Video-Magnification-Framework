# æ¬§æ‹‰è§†é¢‘è¿åŠ¨æ”¾å¤§æ¡†æ¶

> æ”¾å¤§äººçœ¼éš¾ä»¥å¯Ÿè§‰çš„å¾®å°è¿åŠ¨ï¼Œå®ç°è§†è§‰å¢å¼ºã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
git clone https://github.com/yourusername/Eulerian-Video-Magnification.git
cd Eulerian-Video-Magnification
pip install -r requirements.txt
```
> **æ³¨æ„**ï¼špytorchéœ€å•ç‹¬å®‰è£…ã€‚CUDAæ”¯æŒè¯·å‚è€ƒ [å®˜æ–¹æ•™ç¨‹](https://pytorch.org/get-started/locally/)

### æ ¸å¿ƒå‘½ä»¤

```bash
# è·å–æœ€ä½³æ”¾å¤§å‚æ•°å»ºè®®ï¼ˆæ¨èä½¿ç”¨ï¼‰
python main.py suggest input.mp4

# ä½¿ç”¨é¢„è®¾æ”¾å¤§è§†é¢‘ä¸­çš„è¿åŠ¨
python main.py magnify input.mp4 output.mp4 --preset pulse

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é¢„è®¾
python main.py list-presets
```

## ğŸ“‹ å‘½ä»¤è¯´æ˜

å‘½ä»¤ | åŠŸèƒ½ | é‡è¦è¯´æ˜
---|---|---
`magnify` | æ”¾å¤§è§†é¢‘ä¸­çš„è¿åŠ¨ | ä½¿ç”¨é¢„è®¾æˆ–è‡ªå®šä¹‰å‚æ•°è¿›è¡Œå¸¦é€šæ»¤æ³¢
`suggest` | åˆ†æè§†é¢‘å¹¶å»ºè®®æœ€ä½³å‚æ•° | æ¨èçš„ä¸»è¦åˆ†æå‘½ä»¤
`list-presets` | åˆ—å‡ºæ‰€æœ‰é¢‘ç‡é¢„è®¾ | æ˜¾ç¤ºå¯ç”¨é¢„è®¾å’Œå‚æ•°
`visualize-preset` | å¯è§†åŒ–é¢„è®¾å“åº”æ›²çº¿ | ä¸åˆ†æè§†é¢‘ï¼Œä»…æ˜¾ç¤ºé¢„è®¾çš„é¢‘ç‡å“åº”
`analyze` | åŸºç¡€é¢‘ç‡åˆ†æ | åŠŸèƒ½å·²åŒ…å«åœ¨suggestå‘½ä»¤ä¸­ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨suggest

### âš™ï¸ å¸¸ç”¨ç¤ºä¾‹

#### åˆ†æå‘½ä»¤

```bash
# è·å–æ”¾å¤§å»ºè®®ï¼ˆæ¨èä½¿ç”¨ï¼‰
python main.py suggest input.mp4

# åˆ†æç‰¹å®šåŒºåŸŸ
python main.py suggest input.mp4 --roi "100,100,200,200"

# å¯è§†åŒ–ç‰¹å®šé¢„è®¾çš„é¢‘ç‡å“åº”ï¼ˆä¸åˆ†æè§†é¢‘ï¼‰
python main.py visualize-preset pulse --video input.mp4
```

#### æ”¾å¤§å‘½ä»¤

```bash
# æ”¾å¤§å¿ƒè·³ (0.8-2.5 Hz)
python main.py magnify input.mp4 output.mp4 --preset pulse

# æ”¾å¤§å‘¼å¸ (0.2-0.7 Hz)
python main.py magnify input.mp4 output.mp4 --preset breathing

# æ”¾å¤§ç”µæœºå·¥é¢‘ (45.0-55.0 Hz)
python main.py magnify input.mp4 output.mp4 --preset motor

# è‡ªå®šä¹‰é¢‘ç‡å’Œæ”¾å¤§ç³»æ•°
python main.py magnify input.mp4 output.mp4 --freq-min 0.8 --freq-max 2.0 --amplify 15

# å¤šé¢‘æ®µåŒæ—¶æ”¾å¤§
python main.py magnify input.mp4 output.mp4 --freq-bands "0.3-3.0,45.0-55.0"
```

## ğŸ› ï¸ æ ¸å¿ƒå‚æ•°

å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼
---|---|---
`--preset` | é¢„è®¾å‚æ•° (pulse/breathing/motor ç­‰) | æ— 
`--amplify` | è¿åŠ¨æ”¾å¤§ç³»æ•° | 10.0
`--freq-min` | æœ€å°é¢‘ç‡ (Hz) | 0.4
`--freq-max` | æœ€å¤§é¢‘ç‡ (Hz) | 3.0
`--freq-bands` | å¤šé¢‘æ®µ ("0.3-3.0,45.0-55.0") | æ— 
`--stabilize` | è§†é¢‘ç¨³å®š | False
`--blur` | ç©ºé—´æ¨¡ç³Š (0=ç¦ç”¨) | 0
`--roi` | æ„Ÿå…´è¶£åŒºåŸŸ ("x,y,width,height") | æ•´ä¸ªç”»é¢

<details>
<summary>æŸ¥çœ‹æ›´å¤šå‚æ•°</summary>

### å¢å¼ºå‚æ•°

å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼
---|---|---
`--levels` | é‡‘å­—å¡”å±‚æ•° | 3
`--chunk-size` | ä¸€æ¬¡å¤„ç†å¸§æ•° | 20
`--overlap` | æ•°æ®å—é‡å å¸§æ•° | 8
`--adaptive` | è‡ªé€‚åº”æ”¾å¤§ | False
`--bilateral` | åŒè¾¹æ»¤æ³¢ | False
`--color-stabilize` | é¢œè‰²ç¨³å®š | False
`--multiband` | å¤šé¢‘æ®µå¤„ç† | False
`--sampling-rate` | åˆ†æé‡‡æ ·ç‡ (0.0-1.0) | 0.5
`--no-cache` | ç¦ç”¨ç¼“å­˜ | False

</details>

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### å…³é”®æ¦‚å¿µ

- **ä¸¤ç§ä¸»è¦åŠŸèƒ½**ï¼š
  - **åˆ†æ**ï¼šæ£€æµ‹è§†é¢‘ä¸­å®é™…å­˜åœ¨çš„é¢‘ç‡ï¼Œä¸å—é¢„è®¾é™åˆ¶
  - **æ”¾å¤§**ï¼šä½¿ç”¨æŒ‡å®šé¢‘ç‡èŒƒå›´çš„å¸¦é€šæ»¤æ³¢å™¨æ”¾å¤§è¿åŠ¨

### å‘½ä»¤å‚æ•°è¯´æ˜

- **`--preset` å‚æ•°åœ¨ä¸åŒå‘½ä»¤ä¸­çš„ä½œç”¨**ï¼š
  - åœ¨ `magnify` å‘½ä»¤ä¸­ï¼šç›´æ¥è®¾ç½®å¸¦é€šæ»¤æ³¢å™¨é¢‘ç‡èŒƒå›´å’Œæ”¾å¤§ç³»æ•°
  - åœ¨ `analyze` å‘½ä»¤ä¸­ï¼šä»…ç”¨äºè®¾ç½®æ˜¾ç¤ºèŒƒå›´ï¼Œä¸å½±å“åˆ†æç»“æœ
  - åœ¨ `suggest` å‘½ä»¤ä¸­ï¼šä¸å½±å“åˆ†æç»“æœå’Œå»ºè®®

### æ¨èå·¥ä½œæµç¨‹

1. **åˆ†æ** â†’ è·å–è§†é¢‘ä¸­å­˜åœ¨çš„é¢‘ç‡å’Œå»ºè®®å‚æ•°ï¼š`suggest`
2. **é€‰æ‹©** â†’ æ ¹æ®å»ºè®®é€‰æ‹©åˆé€‚çš„é¢„è®¾æˆ–è‡ªå®šä¹‰å‚æ•°
3. **æ”¾å¤§** â†’ ä½¿ç”¨æ‰€é€‰å‚æ•°æ”¾å¤§è§†é¢‘ï¼š`magnify`

### å¸¸è§åœºæ™¯å‚æ•°

ç›®æ ‡ | æ¨èé¢„è®¾ | é¢‘ç‡èŒƒå›´
---|---|---
å¿ƒè·³/è„‰æ | `pulse` | 0.8-2.5 Hz
å‘¼å¸ | `breathing` | 0.2-0.7 Hz
ç”µæœºå·¥é¢‘ | `motor` | 45.0-55.0 Hz
ææ…¢è¿åŠ¨ | `ultra-low` | 0.05-0.3 Hz
é«˜é¢‘æŒ¯åŠ¨ | `med-high` | 10.0-30.0 Hz

### ä¼˜åŒ–å»ºè®®

- **å‡å°‘å™ªç‚¹**ï¼š`--blur 0.5 --motion-threshold 0.02`
- **å¤„ç†æŠ–åŠ¨**ï¼š`--stabilize`
- **ä¿ç•™è¾¹ç¼˜**ï¼š`--bilateral`
- **å¤§å‹è§†é¢‘**ï¼šé™ä½ `--sampling-rate` å’Œ `--overlap`
- **é«˜é¢‘ç‡è§†é¢‘**ï¼šç¡®ä¿å¸§ç‡è‡³å°‘æ˜¯ç›®æ ‡é¢‘ç‡çš„ä¸¤å€

## ğŸ“‚ é¡¹ç›®ç»“æ„

- `main.py` - ä¸»ç¨‹åºå…¥å£
- `analysis_commands.py` - åˆ†æå‘½ä»¤å®ç°
- `motion_amplifier.py` - æ¬§æ‹‰æ”¾å¤§å®ç°
- `frequency_analyzer.py` - é¢‘ç‡åˆ†æ
- `frequency_presets.py` - é¢„è®¾å®šä¹‰
- `cache_manager.py` - ç¼“å­˜ç®¡ç†
- `TEMP/` - ç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶
- `Image/` - åˆ†æç»“æœå’Œå¯è§†åŒ–å›¾åƒ
